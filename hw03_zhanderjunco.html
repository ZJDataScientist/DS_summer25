<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>WebSraping-SQL</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="hw03_zhanderjunco_files/libs/clipboard/clipboard.min.js"></script>
<script src="hw03_zhanderjunco_files/libs/quarto-html/quarto.js"></script>
<script src="hw03_zhanderjunco_files/libs/quarto-html/popper.min.js"></script>
<script src="hw03_zhanderjunco_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="hw03_zhanderjunco_files/libs/quarto-html/anchor.min.js"></script>
<link href="hw03_zhanderjunco_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="hw03_zhanderjunco_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="hw03_zhanderjunco_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="hw03_zhanderjunco_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="hw03_zhanderjunco_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">WebSraping-SQL</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="instructions" class="level2">
<h2 class="anchored" data-anchor-id="instructions">Instructions</h2>
<p>Complete the following exercises using the appropriate packages in R. Ensure that your solutions are optimized and use functional programming principles where applicable.</p>
<ol type="1">
<li>Load the necessary libraries.</li>
<li>Answer each question in separate R code chunks.</li>
<li>Provide detailed explanations for your approach.</li>
<li>Submit the rendered HTML file.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load contributed packages with pacman</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(pacman,rvest, dplyr, tidyverse, xml2,janitor, DBI, duckdb, nycflights13)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="webscraping" class="level2">
<h2 class="anchored" data-anchor-id="webscraping">WebScraping</h2>
<section id="problem-1" class="level3">
<h3 class="anchored" data-anchor-id="problem-1">Problem 1:</h3>
<p>Go to the following page <a href="https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population">List of U.S. states and territories by population</a> and select the table <code>State and territory rankings</code>.</p>
<ol type="1">
<li>Make sure the name of columns and the first row is correct<br>
</li>
<li>Make sure the class of each column is correct<br>
</li>
<li>Replace <code>__</code> with <code>NA</code></li>
</ol>
<p><strong>Solution Strategy:</strong><br>
<br>
1. Read the Wikipedia page</p>
<ol start="2" type="1">
<li>Extract all tables with ‘wikitable’</li>
<li>Target the correct table by position</li>
<li>Extract the

rows for custom header handling</li>
<li>Extract header text using html_text2() to avoid NA issues</li>
<li>Combine multi-row headers keeping first column from header1, rest from header2</li>
<li>Extract table body (the actual data rows)</li>
<li>Assign clean column names</li>
<li>Clean up “__” &amp; “-”and convert to NA</li>
<li>Convert Column Types:</li>
<li>View structure</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Read the Wikipedia page</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>wiki_html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Extract all tables with class 'wikitable'</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">html_elements</span>(wiki_html, <span class="st">".wikitable"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Target the correct table by position </span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>target_table <span class="ot">&lt;-</span> tables[[<span class="dv">1</span>]]</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Extract the &lt;thead&gt; rows for custom header handling</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>header_rows <span class="ot">&lt;-</span> <span class="fu">html_elements</span>(target_table, <span class="st">"thead tr"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Extract header text using html_text2() to avoid NA issues</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>header1 <span class="ot">&lt;-</span> <span class="fu">html_elements</span>(header_rows[<span class="dv">1</span>], <span class="st">"th"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>()</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>header2 <span class="ot">&lt;-</span> <span class="fu">html_elements</span>(header_rows[<span class="dv">2</span>], <span class="st">"th"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>()</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Combine multi-row headers</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>full_headers <span class="ot">&lt;-</span> <span class="fu">c</span>(header1[<span class="dv">1</span>], header2)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 7: Extract table body (the actual data rows)</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>table_body <span class="ot">&lt;-</span> <span class="fu">html_element</span>(target_table, <span class="st">"tbody"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">header =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 8: Assign clean column names (temporary)</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(table_body) <span class="ot">&lt;-</span> <span class="fu">make_clean_names</span>(full_headers)</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co"># 8.1 Promote first row as column names</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>table_body <span class="ot">&lt;-</span> <span class="fu">row_to_names</span>(table_body, <span class="at">row_number =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Row 1 does not provide unique names. Consider running clean_names()
after row_to_names().</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean column names again (now the real headers)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>table_body <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(table_body)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 9: Clean up "__" and "—" and convert to NA</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>table_body <span class="ot">&lt;-</span> table_body <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">na_if</span>(., <span class="st">"__"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">na_if</span>(., <span class="st">"—"</span>)))</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 10: Convert column types</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>table_body <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">type_convert</span>(table_body)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
── Column specification ────────────────────────────────────────────────────────
cols(
  state_or_territory = col_character(),
  census_population_8_9_a = col_character(),
  census_population_8_9_a_2 = col_character(),
  change_2010_2020_9_a = col_character(),
  change_2010_2020_9_a_2 = col_character(),
  house_seats_b = col_character(),
  house_seats_b_2 = col_character(),
  pop_perelec_vote_2020_c = col_character(),
  pop_perseat_2020_a = col_character(),
  percent_us_2020 = col_character(),
  percent_ec_2020 = col_character()
)</code></pre>
</div>
</div>
<p>Optional step I like to use is to display the link to the original source using gt:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>table_body <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_caption</span>(<span class="st">"Table: U.S. States and Territories by Population"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">"Source: [Wikipedia](https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population)"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="kvmipfpofz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kvmipfpofz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kvmipfpofz thead, #kvmipfpofz tbody, #kvmipfpofz tfoot, #kvmipfpofz tr, #kvmipfpofz td, #kvmipfpofz th {
  border-style: none;
}

#kvmipfpofz p {
  margin: 0;
  padding: 0;
}

#kvmipfpofz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kvmipfpofz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kvmipfpofz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kvmipfpofz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kvmipfpofz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kvmipfpofz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kvmipfpofz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kvmipfpofz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kvmipfpofz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kvmipfpofz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kvmipfpofz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kvmipfpofz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kvmipfpofz .gt_spanner_row {
  border-bottom-style: hidden;
}

#kvmipfpofz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kvmipfpofz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kvmipfpofz .gt_from_md > :first-child {
  margin-top: 0;
}

#kvmipfpofz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kvmipfpofz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kvmipfpofz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kvmipfpofz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kvmipfpofz .gt_row_group_first td {
  border-top-width: 2px;
}

#kvmipfpofz .gt_row_group_first th {
  border-top-width: 2px;
}

#kvmipfpofz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kvmipfpofz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kvmipfpofz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kvmipfpofz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kvmipfpofz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kvmipfpofz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kvmipfpofz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kvmipfpofz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kvmipfpofz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kvmipfpofz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kvmipfpofz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kvmipfpofz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kvmipfpofz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kvmipfpofz .gt_left {
  text-align: left;
}

#kvmipfpofz .gt_center {
  text-align: center;
}

#kvmipfpofz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kvmipfpofz .gt_font_normal {
  font-weight: normal;
}

#kvmipfpofz .gt_font_bold {
  font-weight: bold;
}

#kvmipfpofz .gt_font_italic {
  font-style: italic;
}

#kvmipfpofz .gt_super {
  font-size: 65%;
}

#kvmipfpofz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kvmipfpofz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kvmipfpofz .gt_indent_1 {
  text-indent: 5px;
}

#kvmipfpofz .gt_indent_2 {
  text-indent: 10px;
}

#kvmipfpofz .gt_indent_3 {
  text-indent: 15px;
}

#kvmipfpofz .gt_indent_4 {
  text-indent: 20px;
}

#kvmipfpofz .gt_indent_5 {
  text-indent: 25px;
}

#kvmipfpofz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kvmipfpofz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Table: U.S. States and Territories by Population</caption>
<thead>
<tr class="header gt_col_headings">
<th id="state_or_territory" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">state_or_territory</th>
<th id="census_population_8_9_a" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">census_population_8_9_a</th>
<th id="census_population_8_9_a_2" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">census_population_8_9_a_2</th>
<th id="change_2010_2020_9_a" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">change_2010_2020_9_a</th>
<th id="change_2010_2020_9_a_2" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">change_2010_2020_9_a_2</th>
<th id="house_seats_b" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">house_seats_b</th>
<th id="house_seats_b_2" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">house_seats_b_2</th>
<th id="pop_perelec_vote_2020_c" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">pop_perelec_vote_2020_c</th>
<th id="pop_perseat_2020_a" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">pop_perseat_2020_a</th>
<th id="percent_us_2020" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">percent_us_2020</th>
<th id="percent_ec_2020" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">percent_ec_2020</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">State or territory</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">July 1, 2024 (est.)</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">April 1, 2020</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">Abs.</td>
<td class="gt_row gt_left" headers="house_seats_b">Seats</td>
<td class="gt_row gt_right" headers="house_seats_b_2">%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">Pop. perelec. vote(2020)[c]</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">Pop.perseat(2020)[a]</td>
<td class="gt_row gt_left" headers="percent_us_2020">% US(2020)</td>
<td class="gt_row gt_left" headers="percent_ec_2020">% EC(2020)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">California</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">39,431,263</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">39,538,223</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">6.13%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">2,284,267</td>
<td class="gt_row gt_left" headers="house_seats_b">52</td>
<td class="gt_row gt_right" headers="house_seats_b_2">11.95%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">732,189</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">760,350</td>
<td class="gt_row gt_left" headers="percent_us_2020">11.800%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">10.04%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Texas</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">31,290,831</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">29,145,505</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">15.91%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">3,999,944</td>
<td class="gt_row gt_left" headers="house_seats_b">38</td>
<td class="gt_row gt_right" headers="house_seats_b_2">8.74%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">728,638</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">766,987</td>
<td class="gt_row gt_left" headers="percent_us_2020">8.698%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">7.43%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Florida</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">23,372,215</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">21,538,187</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">14.56%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">2,736,877</td>
<td class="gt_row gt_left" headers="house_seats_b">28</td>
<td class="gt_row gt_right" headers="house_seats_b_2">6.44%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">717,940</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">769,221</td>
<td class="gt_row gt_left" headers="percent_us_2020">6.428%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">5.58%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">New York</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">19,867,248</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">20,201,249</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">4.25%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">823,147</td>
<td class="gt_row gt_left" headers="house_seats_b">26</td>
<td class="gt_row gt_right" headers="house_seats_b_2">5.98%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">721,473</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">776,971</td>
<td class="gt_row gt_left" headers="percent_us_2020">6.029%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">5.20%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Pennsylvania</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">13,078,751</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">13,002,700</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.36%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">300,321</td>
<td class="gt_row gt_left" headers="house_seats_b">17</td>
<td class="gt_row gt_right" headers="house_seats_b_2">3.91%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">684,353</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">764,865</td>
<td class="gt_row gt_left" headers="percent_us_2020">3.881%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">3.53%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Illinois</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">12,710,158</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">12,812,508</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">−0.14%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">−18,124</td>
<td class="gt_row gt_left" headers="house_seats_b">17</td>
<td class="gt_row gt_right" headers="house_seats_b_2">3.91%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">674,343</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">753,677</td>
<td class="gt_row gt_left" headers="percent_us_2020">3.824%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">3.53%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Ohio</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">11,883,304</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">11,799,448</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.28%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">262,944</td>
<td class="gt_row gt_left" headers="house_seats_b">15</td>
<td class="gt_row gt_right" headers="house_seats_b_2">3.45%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">694,085</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">786,630</td>
<td class="gt_row gt_left" headers="percent_us_2020">3.521%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">3.16%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Georgia</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">11,180,878</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">10,711,908</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">10.57%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">1,024,255</td>
<td class="gt_row gt_left" headers="house_seats_b">14</td>
<td class="gt_row gt_right" headers="house_seats_b_2">3.22%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">669,494</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">765,136</td>
<td class="gt_row gt_left" headers="percent_us_2020">3.197%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.97%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">North Carolina</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">11,046,024</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">10,439,388</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">9.48%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">903,905</td>
<td class="gt_row gt_left" headers="house_seats_b">14</td>
<td class="gt_row gt_right" headers="house_seats_b_2">3.22%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">652,462</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">745,671</td>
<td class="gt_row gt_left" headers="percent_us_2020">3.116%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.97%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Michigan</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">10,140,459</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">10,077,331</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">1.96%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">193,691</td>
<td class="gt_row gt_left" headers="house_seats_b">13</td>
<td class="gt_row gt_right" headers="house_seats_b_2">2.99%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">671,822</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">775,179</td>
<td class="gt_row gt_left" headers="percent_us_2020">3.008%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.79%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">New Jersey</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">9,500,851</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">9,288,994</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">5.65%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">497,100</td>
<td class="gt_row gt_left" headers="house_seats_b">12</td>
<td class="gt_row gt_right" headers="house_seats_b_2">2.76%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">663,500</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">774,083</td>
<td class="gt_row gt_left" headers="percent_us_2020">2.772%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.60%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Virginia</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">8,811,195</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">8,631,393</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">7.88%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">630,369</td>
<td class="gt_row gt_left" headers="house_seats_b">11</td>
<td class="gt_row gt_right" headers="house_seats_b_2">2.53%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">663,953</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">784,672</td>
<td class="gt_row gt_left" headers="percent_us_2020">2.576%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.42%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Washington</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">7,958,180</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">7,705,281</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">14.58%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">980,741</td>
<td class="gt_row gt_left" headers="house_seats_b">10</td>
<td class="gt_row gt_right" headers="house_seats_b_2">2.30%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">642,107</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">770,528</td>
<td class="gt_row gt_left" headers="percent_us_2020">2.300%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.23%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Arizona</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">7,582,384</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">7,151,502</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">11.88%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">759,485</td>
<td class="gt_row gt_left" headers="house_seats_b">9</td>
<td class="gt_row gt_right" headers="house_seats_b_2">2.07%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">650,137</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">794,611</td>
<td class="gt_row gt_left" headers="percent_us_2020">2.134%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.04%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Tennessee</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">7,227,750</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">6,910,840</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">8.90%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">564,735</td>
<td class="gt_row gt_left" headers="house_seats_b">9</td>
<td class="gt_row gt_right" headers="house_seats_b_2">2.07%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">628,258</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">767,871</td>
<td class="gt_row gt_left" headers="percent_us_2020">2.062%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.04%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Massachusetts</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">7,136,171</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">7,029,917</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">7.37%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">482,288</td>
<td class="gt_row gt_left" headers="house_seats_b">9</td>
<td class="gt_row gt_right" headers="house_seats_b_2">2.07%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">639,083</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">781,102</td>
<td class="gt_row gt_left" headers="percent_us_2020">2.098%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.04%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Indiana</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">6,924,275</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">6,785,528</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">4.65%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">301,726</td>
<td class="gt_row gt_left" headers="house_seats_b">9</td>
<td class="gt_row gt_right" headers="house_seats_b_2">2.07%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">616,866</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">753,948</td>
<td class="gt_row gt_left" headers="percent_us_2020">2.025%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">2.04%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Maryland</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">6,263,220</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">6,177,224</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">6.99%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">403,672</td>
<td class="gt_row gt_left" headers="house_seats_b">8</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.84%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">617,722</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">772,153</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.844%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.86%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Missouri</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">6,245,466</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">6,154,913</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.77%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">165,986</td>
<td class="gt_row gt_left" headers="house_seats_b">8</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.84%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">615,491</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">769,364</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.837%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.86%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Wisconsin</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">5,960,975</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">5,893,718</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">3.64%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">206,732</td>
<td class="gt_row gt_left" headers="house_seats_b">8</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.84%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">589,372</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">736,715</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.759%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.86%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Colorado</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">5,957,493</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">5,773,714</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">14.80%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">744,518</td>
<td class="gt_row gt_left" headers="house_seats_b">8</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.84%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">577,371</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">721,714</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.723%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.86%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Minnesota</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">5,793,151</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">5,706,494</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">7.59%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">402,569</td>
<td class="gt_row gt_left" headers="house_seats_b">8</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.84%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">570,649</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">713,312</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.703%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.86%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">South Carolina</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">5,478,831</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">5,118,425</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">10.66%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">493,061</td>
<td class="gt_row gt_left" headers="house_seats_b">7</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.61%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">568,714</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">731,204</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.528%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.67%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Alabama</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">5,157,699</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">5,024,279</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">5.12%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">244,543</td>
<td class="gt_row gt_left" headers="house_seats_b">7</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.61%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">558,253</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">717,754</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.499%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.67%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Louisiana</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">4,597,740</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">4,657,757</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.74%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">124,385</td>
<td class="gt_row gt_left" headers="house_seats_b">6</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.38%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">582,220</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">776,293</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.390%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.49%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Kentucky</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">4,588,372</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">4,505,836</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">3.84%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">166,469</td>
<td class="gt_row gt_left" headers="house_seats_b">6</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.38%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">563,230</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">750,973</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.345%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.49%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Oregon</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">4,272,371</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">4,237,256</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">10.60%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">406,182</td>
<td class="gt_row gt_left" headers="house_seats_b">6</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.38%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">529,657</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">706,209</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.265%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.49%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Oklahoma</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">4,095,393</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">3,959,353</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">5.54%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">208,002</td>
<td class="gt_row gt_left" headers="house_seats_b">5</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.15%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">565,622</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">791,871</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.182%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.30%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Connecticut</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">3,675,069</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">3,605,944</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">0.89%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">31,847</td>
<td class="gt_row gt_left" headers="house_seats_b">5</td>
<td class="gt_row gt_right" headers="house_seats_b_2">1.15%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">515,135</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">721,189</td>
<td class="gt_row gt_left" headers="percent_us_2020">1.076%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.30%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Utah</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">3,503,613</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">3,271,616</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">18.37%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">507,731</td>
<td class="gt_row gt_left" headers="house_seats_b">4</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.92%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">545,269</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">817,904</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.976%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.12%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Nevada</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">3,267,467</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">3,104,614</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">14.96%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">404,063</td>
<td class="gt_row gt_left" headers="house_seats_b">4</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.92%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">517,436</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">776,154</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.927%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.12%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Iowa</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">3,241,488</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">3,190,369</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">4.73%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">144,014</td>
<td class="gt_row gt_left" headers="house_seats_b">4</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.92%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">531,728</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">797,592</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.952%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.12%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Puerto Rico</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">3,203,295</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">3,285,874</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">−11.81%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">−439,915</td>
<td class="gt_row gt_left" headers="house_seats_b">1*</td>
<td class="gt_row gt_right" headers="house_seats_b_2">NA</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">NA</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">NA</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.981%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">NA</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Arkansas</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">3,088,354</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">3,011,524</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">3.28%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">95,606</td>
<td class="gt_row gt_left" headers="house_seats_b">4</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.92%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">501,921</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">752,881</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.899%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.12%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Kansas</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">2,970,606</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">2,937,880</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.97%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">84,762</td>
<td class="gt_row gt_left" headers="house_seats_b">4</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.92%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">489,647</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">734,470</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.877%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.12%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Mississippi</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">2,943,045</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">2,961,279</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">−0.20%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">−6,018</td>
<td class="gt_row gt_left" headers="house_seats_b">4</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.92%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">493,547</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">740,320</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.884%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">1.12%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">New Mexico</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">2,130,256</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">2,117,522</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.83%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">58,343</td>
<td class="gt_row gt_left" headers="house_seats_b">3</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.69%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">423,504</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">705,841</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.632%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.93%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Nebraska</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">2,005,465</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">1,961,504</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">7.40%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">135,163</td>
<td class="gt_row gt_left" headers="house_seats_b">3</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.69%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">392,301</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">653,835</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.585%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.93%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Idaho</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">2,001,619</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">1,839,106</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">17.32%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">271,524</td>
<td class="gt_row gt_left" headers="house_seats_b">2</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.46%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">459,777</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">919,553</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.549%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.74%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">West Virginia</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">1,769,979</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">1,793,716</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">−3.20%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">−59,278</td>
<td class="gt_row gt_left" headers="house_seats_b">2</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.46%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">448,429</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">896,858</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.535%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.74%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Hawaii</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">1,446,146</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">1,455,271</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">6.98%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">94,970</td>
<td class="gt_row gt_left" headers="house_seats_b">2</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.46%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">363,818</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">727,636</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.434%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.74%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">New Hampshire</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">1,409,032</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">1,377,529</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">4.66%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">61,059</td>
<td class="gt_row gt_left" headers="house_seats_b">2</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.46%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">344,382</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">688,765</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.411%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.74%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Maine</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">1,405,012</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">1,362,359</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.56%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">33,998</td>
<td class="gt_row gt_left" headers="house_seats_b">2</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.46%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">340,590</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">681,180</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.407%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.74%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Montana</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">1,137,233</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">1,084,225</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">9.58%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">94,810</td>
<td class="gt_row gt_left" headers="house_seats_b">2</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.46%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">271,056</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">542,113</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.324%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.74%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Rhode Island</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">1,112,308</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">1,097,379</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">4.26%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">44,812</td>
<td class="gt_row gt_left" headers="house_seats_b">2</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.46%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">274,345</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">548,690</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.328%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.74%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Delaware</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">1,051,917</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">989,948</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">10.25%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">92,014</td>
<td class="gt_row gt_left" headers="house_seats_b">1</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.23%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">329,983</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">989,948</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.295%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.56%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">South Dakota</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">924,669</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">886,667</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">8.90%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">72,487</td>
<td class="gt_row gt_left" headers="house_seats_b">1</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.23%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">295,556</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">886,667</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.265%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.56%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">North Dakota</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">796,568</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">779,094</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">15.83%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">106,503</td>
<td class="gt_row gt_left" headers="house_seats_b">1</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.23%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">259,698</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">779,094</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.233%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.56%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Alaska</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">740,133</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">733,391</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">3.26%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">23,160</td>
<td class="gt_row gt_left" headers="house_seats_b">1</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.23%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">244,464</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">733,391</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.219%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.56%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">District of Columbia</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">702,250</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">689,545</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">14.60%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">87,822</td>
<td class="gt_row gt_left" headers="house_seats_b">1*</td>
<td class="gt_row gt_right" headers="house_seats_b_2">NA</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">229,848</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">NA</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.206%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.56%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Vermont</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">648,493</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">643,077</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.77%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">17,336</td>
<td class="gt_row gt_left" headers="house_seats_b">1</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.23%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">214,359</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">643,077</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.192%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.56%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Wyoming</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">587,618</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">576,851</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">2.35%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">13,225</td>
<td class="gt_row gt_left" headers="house_seats_b">1</td>
<td class="gt_row gt_right" headers="house_seats_b_2">0.23%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">192,284</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">576,851</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.172%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">0.56%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Guam[11]</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">172,952</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">153,836</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">−3.47%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">−5,522</td>
<td class="gt_row gt_left" headers="house_seats_b">1*</td>
<td class="gt_row gt_right" headers="house_seats_b_2">NA</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">NA</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">NA</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.046%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">NA</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">U.S. Virgin Islands[12]</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">104,917</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">87,146</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">−18.10%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">−19,259</td>
<td class="gt_row gt_left" headers="house_seats_b">1*</td>
<td class="gt_row gt_right" headers="house_seats_b_2">NA</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">NA</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">NA</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.026%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">American Samoa[13]</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">47,521</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">49,710</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">−10.46%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">−5,809</td>
<td class="gt_row gt_left" headers="house_seats_b">1*</td>
<td class="gt_row gt_right" headers="house_seats_b_2">NA</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">NA</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">NA</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.015%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">NA</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Northern Mariana Islands[14]</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">45,143</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">47,329</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">−12.16%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">−6,554</td>
<td class="gt_row gt_left" headers="house_seats_b">1*</td>
<td class="gt_row gt_right" headers="house_seats_b_2">NA</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">NA</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">NA</td>
<td class="gt_row gt_left" headers="percent_us_2020">0.014%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">Contiguous United States</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">337,924,709</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">329,260,619</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">7.36%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">22,585,613</td>
<td class="gt_row gt_left" headers="house_seats_b">432(+1*)</td>
<td class="gt_row gt_right" headers="house_seats_b_2">99.31%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">623,600</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">756,921</td>
<td class="gt_row gt_left" headers="percent_us_2020">98.265%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">98.70%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">The 50 states</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">339,408,738</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">330,759,736</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">7.34%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">22,615,921</td>
<td class="gt_row gt_left" headers="house_seats_b">435</td>
<td class="gt_row gt_right" headers="house_seats_b_2">100%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">618,242</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">760,367</td>
<td class="gt_row gt_left" headers="percent_us_2020">98.713%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">99.44%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state_or_territory">The 50 states and D.C.</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">340,110,988</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">331,449,281</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">7.35%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">22,703,743</td>
<td class="gt_row gt_left" headers="house_seats_b">435(+1*)</td>
<td class="gt_row gt_right" headers="house_seats_b_2">100%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">616,077</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">NA</td>
<td class="gt_row gt_left" headers="percent_us_2020">98.918%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">100%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state_or_territory">Total US and territories</td>
<td class="gt_row gt_left" headers="census_population_8_9_a">N/A</td>
<td class="gt_row gt_left" headers="census_population_8_9_a_2">335,073,176</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a">7.10%</td>
<td class="gt_row gt_left" headers="change_2010_2020_9_a_2">22,226,684</td>
<td class="gt_row gt_left" headers="house_seats_b">435(+6*)</td>
<td class="gt_row gt_right" headers="house_seats_b_2">100%</td>
<td class="gt_row gt_left" headers="pop_perelec_vote_2020_c">NA</td>
<td class="gt_row gt_left" headers="pop_perseat_2020_a">NA</td>
<td class="gt_row gt_left" headers="percent_us_2020">100%</td>
<td class="gt_row gt_left" headers="percent_ec_2020">NA</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="11" class="gt_sourcenote">Source: <a href="https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population">Wikipedia</a></td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p><br>
To Solve this problem, we begin by scrapping the target Wikipedia page and identifying the correct table using CSS selector. Since the table has multiple row heads, we manually extract and combine them to construct clean column names. The table data is then read in without headers, and the combined headers are applied. We replace placeholders values like “__” and “-” with NA to standardize missing data. The first row is promoted to become the column names, followed by cleaning and converting the column types to their appropriate formats using readr::type_convert(). This ensures the data is tidy and usable for further analysis.<br>
<br>
An optional step I like to use is to display the cleaned table using the gt package, which allows me to add a caption and include a clickable link to the original source for reference.</p>
</section>
</section>
<section id="sql" class="level1">
<h1>SQL</h1>
<p>Please download a duck database. <a href="https://data-science-master.github.io/lectures/data/flights.duckdb" class="uri">https://data-science-master.github.io/lectures/data/flights.duckdb</a></p>
<p>Use duckdb() and DBI::dbConnect() to create a connection to “flights.duckdb”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(duckdb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a> practcon <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>(), <span class="at">dbdir =</span> <span class="st">"flights.duckdb"</span>, <span class="at">read_only =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>dbConnect(): This function establishes a connection to a database.</p>
<p>duckdb(): Specifies you are connecting to a DuckDB database, which is an embedded analytical SQL database.</p>
<p>dbdir = “flights.duckdb”: This tells DuckDB to store the database in a file called flights.duckdb. If the file doesn’t exist, it will be created.</p>
<p>read_only = FALSE: This means you are allowing the database to be modified. If you set this to TRUE, the database would be read-only, meaning you could only query data but not make changes to it.</p>
<p>So, setting read_only = FALSE is necessary if you want to add, update, or delete data in the database.</p>
<p>You can see the object practcon in the “Global Environment” indicating the connection profile has been established to the database.</p>
<p>Check if the connection has established:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbIsValid</span>(practcon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Please note that a basic SQL code chunk looks like this (put SQL code between the chunks):</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>{sql, connection=con}</code></pre>
</div>
</div>
<p>Print out a summary of the tables in this database.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>SHOW <span class="kw">TABLES</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">airlines</td>
</tr>
<tr class="even">
<td style="text-align: left;">airports</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flights</td>
</tr>
<tr class="even">
<td style="text-align: left;">planes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">weather</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="answer-the-following-question-using-sql." class="level2">
<h2 class="anchored" data-anchor-id="answer-the-following-question-using-sql.">Answer the following question using SQL.</h2>
<section id="problem-2-select-flights-from-a-specific-carrier" class="level4">
<h4 class="anchored" data-anchor-id="problem-2-select-flights-from-a-specific-carrier">Problem 2: Select Flights from a Specific Carrier</h4>
<p>Write a SQL query to find all flights from the carrier “United Air Lines Inc.”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="ot">"flights"</span>.<span class="op">*</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> <span class="ot">"flights"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> <span class="ot">"airlines"</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">ON</span> <span class="ot">"flights"</span>.<span class="ot">"carrier"</span> <span class="op">=</span> <span class="ot">"airlines"</span>.<span class="ot">"carrier"</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="ot">"airlines"</span>.<span class="ot">"name"</span> <span class="op">=</span> <span class="st">'United Air Lines Inc.'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">year</th>
<th style="text-align: right;">month</th>
<th style="text-align: right;">day</th>
<th style="text-align: right;">dep_time</th>
<th style="text-align: right;">sched_dep_time</th>
<th style="text-align: right;">dep_delay</th>
<th style="text-align: right;">arr_time</th>
<th style="text-align: right;">sched_arr_time</th>
<th style="text-align: right;">arr_delay</th>
<th style="text-align: left;">carrier</th>
<th style="text-align: right;">flight</th>
<th style="text-align: left;">tailnum</th>
<th style="text-align: left;">origin</th>
<th style="text-align: left;">dest</th>
<th style="text-align: right;">air_time</th>
<th style="text-align: right;">distance</th>
<th style="text-align: right;">hour</th>
<th style="text-align: right;">minute</th>
<th style="text-align: left;">time_hour</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">558</td>
<td style="text-align: right;">600</td>
<td style="text-align: right;">-2</td>
<td style="text-align: right;">1030</td>
<td style="text-align: right;">727</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">569</td>
<td style="text-align: left;">N846UA</td>
<td style="text-align: left;">EWR</td>
<td style="text-align: left;">ORD</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">719</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">601</td>
<td style="text-align: right;">600</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">852</td>
<td style="text-align: right;">905</td>
<td style="text-align: right;">-13</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">684</td>
<td style="text-align: left;">N809UA</td>
<td style="text-align: left;">EWR</td>
<td style="text-align: left;">LAX</td>
<td style="text-align: right;">316</td>
<td style="text-align: right;">2454</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">602</td>
<td style="text-align: right;">600</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">850</td>
<td style="text-align: right;">900</td>
<td style="text-align: right;">-10</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">1691</td>
<td style="text-align: left;">N34137</td>
<td style="text-align: left;">JFK</td>
<td style="text-align: left;">LAX</td>
<td style="text-align: right;">309</td>
<td style="text-align: right;">2475</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">607</td>
<td style="text-align: right;">610</td>
<td style="text-align: right;">-3</td>
<td style="text-align: right;">931</td>
<td style="text-align: right;">924</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">303</td>
<td style="text-align: left;">N502UA</td>
<td style="text-align: left;">JFK</td>
<td style="text-align: left;">SFO</td>
<td style="text-align: right;">350</td>
<td style="text-align: right;">2586</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">607</td>
<td style="text-align: right;">607</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">855</td>
<td style="text-align: right;">912</td>
<td style="text-align: right;">-17</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">1183</td>
<td style="text-align: left;">N27205</td>
<td style="text-align: left;">EWR</td>
<td style="text-align: left;">RSW</td>
<td style="text-align: right;">147</td>
<td style="text-align: right;">1068</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">619</td>
<td style="text-align: right;">614</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">853</td>
<td style="text-align: right;">858</td>
<td style="text-align: right;">-5</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">1115</td>
<td style="text-align: left;">N39475</td>
<td style="text-align: left;">EWR</td>
<td style="text-align: left;">TPA</td>
<td style="text-align: right;">136</td>
<td style="text-align: right;">997</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">14</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">629</td>
<td style="text-align: right;">620</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">727</td>
<td style="text-align: right;">742</td>
<td style="text-align: right;">-15</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">1686</td>
<td style="text-align: left;">N16701</td>
<td style="text-align: left;">EWR</td>
<td style="text-align: left;">BOS</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">641</td>
<td style="text-align: right;">645</td>
<td style="text-align: right;">-4</td>
<td style="text-align: right;">846</td>
<td style="text-align: right;">902</td>
<td style="text-align: right;">-16</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">1138</td>
<td style="text-align: left;">N27724</td>
<td style="text-align: left;">EWR</td>
<td style="text-align: left;">PHX</td>
<td style="text-align: right;">286</td>
<td style="text-align: right;">2133</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">45</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">642</td>
<td style="text-align: right;">643</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">839</td>
<td style="text-align: right;">901</td>
<td style="text-align: right;">-22</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">311</td>
<td style="text-align: left;">N491UA</td>
<td style="text-align: left;">EWR</td>
<td style="text-align: left;">DEN</td>
<td style="text-align: right;">210</td>
<td style="text-align: right;">1605</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">43</td>
<td style="text-align: left;">2013-06-26 10:00:00</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">644</td>
<td style="text-align: right;">545</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">859</td>
<td style="text-align: right;">819</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">UA</td>
<td style="text-align: right;">1714</td>
<td style="text-align: left;">N87527</td>
<td style="text-align: left;">LGA</td>
<td style="text-align: left;">IAH</td>
<td style="text-align: right;">174</td>
<td style="text-align: right;">1416</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">45</td>
<td style="text-align: left;">2013-06-26 09:00:00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>To solve this problem, we needed to retrieve all flight records associated with “United Air Lines Inc.” from the flights table. However, the flights table only contains airline codes (e.g., UA), not full carriers names. To match the full name, we used an inner join between flights and the airlines table on the “carrier” column, which allowed us to filter using the carrier’s full name. We selected all columns from the flights table to satisfy the requirement of retrieving all flight details.</p>
<p>The query above retrieves all flights from “United Air Lines Inc.” as requested. Due to output limits in quarto, only the first 10 rows are shown. However, the query is not limited and return flights across the full year.</p>
<p>The following query is included to validate that the data set flight records for United Air Lines Inc.&nbsp;across all months of the year. Since quarto only displays a limited number of rows by default, this grouped summary helps demonstrate that the main query retrieves a complete set of flights throughout the year, even though a portion is visible in the output.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="ot">"year"</span>, <span class="ot">"month"</span>, <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> num_flights</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> <span class="ot">"flights"</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> <span class="ot">"airlines"</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">ON</span> <span class="ot">"flights"</span>.<span class="ot">"carrier"</span> <span class="op">=</span> <span class="ot">"airlines"</span>.<span class="ot">"carrier"</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="ot">"airlines"</span>.<span class="ot">"name"</span> <span class="op">=</span> <span class="st">'United Air Lines Inc.'</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> <span class="ot">"year"</span>, <span class="ot">"month"</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="ot">"year"</span>, <span class="ot">"month"</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: right;">year</th>
<th style="text-align: right;">month</th>
<th style="text-align: right;">num_flights</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4637</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4346</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4971</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">5047</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4960</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">4975</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">5066</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">5124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">4694</td>
</tr>
<tr class="even">
<td style="text-align: right;">2013</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">5060</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="problem-3-count-the-number-of-flights-for-each-carrier" class="level4">
<h4 class="anchored" data-anchor-id="problem-3-count-the-number-of-flights-for-each-carrier">Problem 3: Count the Number of Flights for Each Carrier</h4>
<p>Write a SQL query to count the total number of flights for each carrier.<br>
</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="ot">"airlines"</span>.<span class="ot">"name"</span> <span class="kw">AS</span> carrier_name,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> total_flights</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> <span class="ot">"flights"</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> <span class="ot">"airlines"</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">ON</span> <span class="ot">"flights"</span>.<span class="ot">"carrier"</span> <span class="op">=</span> <span class="ot">"airlines"</span>.<span class="ot">"carrier"</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> <span class="ot">"airlines"</span>.<span class="ot">"name"</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> total_flights <span class="kw">DESC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">carrier_name</th>
<th style="text-align: right;">total_flights</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">United Air Lines Inc.</td>
<td style="text-align: right;">58665</td>
</tr>
<tr class="even">
<td style="text-align: left;">JetBlue Airways</td>
<td style="text-align: right;">54635</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ExpressJet Airlines Inc.</td>
<td style="text-align: right;">54173</td>
</tr>
<tr class="even">
<td style="text-align: left;">Delta Air Lines Inc.</td>
<td style="text-align: right;">48110</td>
</tr>
<tr class="odd">
<td style="text-align: left;">American Airlines Inc.</td>
<td style="text-align: right;">32729</td>
</tr>
<tr class="even">
<td style="text-align: left;">Envoy Air</td>
<td style="text-align: right;">26397</td>
</tr>
<tr class="odd">
<td style="text-align: left;">US Airways Inc.</td>
<td style="text-align: right;">20536</td>
</tr>
<tr class="even">
<td style="text-align: left;">Endeavor Air Inc.</td>
<td style="text-align: right;">18460</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Southwest Airlines Co.</td>
<td style="text-align: right;">12275</td>
</tr>
<tr class="even">
<td style="text-align: left;">Virgin America</td>
<td style="text-align: right;">5162</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>To answer this question, we needed to count how many flights each airline operated. The flights table contains a “carrier” column with short codes, while the airlines table provides the full carrier names. To make the output redable and meaningful, we performed an inner join between “flights” and “airlines” on the “carrier”. We then grouped the data by “airlines”. “name” and used the COUNT (*) function to calculate the total number of flights per airline. Finally, we ordered the results in descending order to show the carriers with the highest flight counts first.</p>
</section>
<section id="remember-to-close-the-connection-when-you-are-done" class="level4">
<h4 class="anchored" data-anchor-id="remember-to-close-the-connection-when-you-are-done">Remember to Close the connection When You Are Done</h4>
<p>if the connection is open then you need to use dbDisconnect() function</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(practcon, <span class="at">shutdown =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="submission" class="level4">
<h4 class="anchored" data-anchor-id="submission">Submission</h4>
<p>Save your Quarto file after completing each problem, render it, then stage and commit the changes.</p>
<p>Include well-commented code and clear explanations.</p>
<p>Make at least one commit per question.</p>
<p>Submit the rendered file to Canvas and push it to your GitHub repository.</p>
<p>Provide the link to your GitHub repository in the Canvas gradebook as a text submission.</p>
<p>🔹 Problem 1 is worth 40 points, and Problems 2 and 3 are each worth 20 points.</p>
<p>🔹 You will receive an additional 20 points if you correctly push your completed file to GitHub and make at least one commit for each problem.</p>
<p>Good luck!</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>